/**
 * Ocean Sentinel - Chart Styles
 * D3.js visualization styling
 */

/* Chart Container Base */
.chart-container {
    position: relative;
    background: white;
    border-radius: var(--border-radius);
    padding: 1.5rem;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--gray-200);
}

.chart-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-900);
    margin: 0;
}

.chart-controls {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.chart-period-selector {
    display: flex;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius);
    overflow: hidden;
}

.period-btn {
    padding: 0.375rem 0.75rem;
    border: none;
    background: white;
    color: var(--gray-600);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.period-btn:hover {
    background: var(--gray-100);
}

.period-btn.active {
    background: var(--primary-blue);
    color: white;
}

/* SVG Base Styles */
.chart-svg {
    width: 100%;
    height: auto;
    font-family: var(--font-sans);
}

/* Axes Styles */
.axis {
    font-size: 12px;
    color: var(--gray-600);
}

.axis .domain {
    stroke: var(--gray-300);
    stroke-width: 1;
}

.axis .tick line {
    stroke: var(--gray-300);
    stroke-width: 1;
}

.axis .tick text {
    fill: var(--gray-600);
    font-size: 11px;
}

.axis-label {
    font-size: 12px;
    font-weight: 500;
    fill: var(--gray-700);
}

/* Grid Lines */
.grid-line {
    stroke: var(--gray-200);
    stroke-width: 1;
    stroke-dasharray: 2,2;
    opacity: 0.7;
}

/* Timeline Chart Styles */
.threat-timeline {
    overflow: visible;
}

.threat-line {
    fill: none;
    stroke-width: 2.5;
    opacity: 0.9;
    transition: all 0.3s ease;
}

.threat-line:hover {
    stroke-width: 3.5;
    opacity: 1;
}

.threat-dot {
    cursor: pointer;
    transition: all 0.3s ease;
}

.threat-dot:hover {
    stroke-width: 2;
    stroke: white;
    transform: scale(1.3);
}

/* Severity Chart Styles */
.severity-bar {
    cursor: pointer;
    transition: all 0.3s ease;
}

.severity-bar:hover {
    opacity: 0.8;
    transform: translateY(-2px);
}

.bar-label {
    font-size: 11px;
    font-weight: 500;
    fill: var(--gray-700);
    text-anchor: middle;
}

/* Environmental Chart Styles */
.env-bar {
    cursor: pointer;
    transition: all 0.3s ease;
}

.env-bar:hover {
    opacity: 0.8;
}

.env-label {
    font-size: 10px;
    font-weight: 500;
    fill: var(--gray-600);
}

/* Donut Chart Styles */
.arc {
    cursor: pointer;
    transition: all 0.3s ease;
}

.arc:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

.arc text {
    font-size: 12px;
    font-weight: 600;
    text-anchor: middle;
}

/* Heatmap Styles */
.heatmap-cell {
    cursor: pointer;
    transition: all 0.2s ease;
}

.heatmap-cell:hover {
    stroke: var(--gray-600);
    stroke-width: 2;
}

/* Legend Styles */
.legend {
    font-size: 12px;
}

.legend rect {
    stroke-width: 1;
    stroke: var(--gray-300);
}

.legend text {
    fill: var(--gray-700);
    font-size: 11px;
}

.legend-title {
    font-weight: 600;
    fill: var(--gray-800);
}

/* Tooltip Styles */
.chart-tooltip {
    position: absolute;
    padding: 0.75rem;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    border-radius: var(--border-radius);
    font-size: 0.75rem;
    pointer-events: none;
    z-index: 1000;
    max-width: 200px;
    box-shadow: var(--shadow-lg);
}

.timeline-tooltip {
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 0.75rem;
    border-radius: var(--border-radius);
    font-size: 0.75rem;
    line-height: 1.4;
    box-shadow: var(--shadow-lg);
}

.tooltip-title {
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: var(--accent-cyan);
}

.tooltip-content {
    font-size: 0.7rem;
}

/* Chart Loading States */
.chart-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 300px;
    color: var(--gray-500);
}

.chart-loading-spinner {
    width: 24px;
    height: 24px;
    border: 2px solid var(--gray-300);
    border-top: 2px solid var(--primary-blue);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 0.5rem;
}

/* Chart Error States */
.chart-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 300px;
    color: var(--gray-500);
    text-align: center;
}

.chart-error-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: var(--gray-400);
}

.chart-error-message {
    font-size: 0.875rem;
    margin-bottom: 1rem;
}

.chart-retry-btn {
    padding: 0.5rem 1rem;
    background: var(--primary-blue);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 0.75rem;
}

/* Zoom and Pan Controls */
.chart-zoom-controls {
    position: absolute;
    top: 1rem;
    right: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.zoom-btn {
    width: 32px;
    height: 32px;
    border: 1px solid var(--gray-300);
    background: white;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: var(--gray-600);
    transition: all 0.2s;
}

.zoom-btn:hover {
    background: var(--gray-100);
    border-color: var(--gray-400);
}

/* Brush Selection */
.brush .extent {
    fill: var(--primary-blue);
    fill-opacity: 0.3;
    stroke: var(--primary-blue);
    stroke-width: 1;
}

.brush .resize path {
    fill: var(--primary-blue);
    stroke: white;
    stroke-width: 2;
}

/* Color Scales */
.chart-color-storm { stroke: #ff6b6b; fill: #ff6b6b; }
.chart-color-pollution { stroke: #4ecdc4; fill: #4ecdc4; }
.chart-color-erosion { stroke: #45b7d1; fill: #45b7d1; }
.chart-color-algal-bloom { stroke: #96ceb4; fill: #96ceb4; }
.chart-color-illegal-dumping { stroke: #ffeaa7; fill: #ffeaa7; }
.chart-color-anomaly { stroke: #dda0dd; fill: #dda0dd; }

/* Animation Classes */
.chart-animate-in {
    animation: chartFadeIn 0.6s ease-out;
}

.chart-animate-update {
    animation: chartUpdate 0.4s ease-in-out;
}

@keyframes chartFadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes chartUpdate {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
}

/* Responsive Chart Styles */
@media (max-width: 768px) {
    .chart-container {
        padding: 1rem;
    }
    
    .chart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .chart-controls {
        width: 100%;
        justify-content: center;
    }
    
    .period-btn {
        flex: 1;
        text-align: center;
    }
    
    .chart-tooltip {
        font-size: 0.7rem;
        padding: 0.5rem;
        max-width: 150px;
    }
    
    .axis text {
        font-size: 10px;
    }
    
    .legend text {
        font-size: 10px;
    }
}

@media (max-width: 480px) {
    .chart-zoom-controls {
        position: relative;
        top: auto;
        right: auto;
        flex-direction: row;
        margin-top: 1rem;
        justify-content: center;
    }
    
    .chart-period-selector {
        width: 100%;
    }
    
    .period-btn {
        font-size: 0.7rem;
        padding: 0.25rem 0.5rem;
    }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
    .axis .domain,
    .axis .tick line {
        stroke: #000000;
        stroke-width: 2;
    }
    
    .grid-line {
        stroke: #000000;
        opacity: 0.5;
    }
    
    .threat-line {
        stroke-width: 3;
    }
}

/* Print Styles */
@media print {
    .chart-controls,
    .chart-zoom-controls {
        display: none;
    }
    
    .chart-container {
        box-shadow: none;
        border: 1px solid #000;
    }
    
    .chart-tooltip {
        display: none;
    }
}
